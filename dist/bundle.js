(()=>{"use strict";var e,t,n={418:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(445),a=n(482),i=n(997),s={name:"",price:0};class c extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,a.addObserver)(this)}connectedCallback(){return o(this,void 0,void 0,(function*(){if(0===a.appState.products.length){const e=yield(0,i.getProductsAction)();(0,a.dispatch)(e)}else this.render()}))}changeName(e){s.name=e.target.value}changePrice(e){s.price=e.target.value}submitForm(){(0,r.addProduct)(s)}render(){return o(this,void 0,void 0,(function*(){var e;if(this.shadowRoot){const t=this.ownerDocument.createElement("h1");t.innerText="Formulario para crear productos",this.shadowRoot.appendChild(t);const n=this.ownerDocument.createElement("input");n.placeholder="Nombre del producto",n.addEventListener("change",this.changeName),this.shadowRoot.appendChild(n);const o=this.ownerDocument.createElement("input");o.placeholder="Precio del producto",o.addEventListener("change",this.changePrice),this.shadowRoot.appendChild(o);const r=this.ownerDocument.createElement("button");r.innerText="Enviar producto",r.addEventListener("click",this.submitForm),this.shadowRoot.appendChild(r),null===(e=a.appState.products)||void 0===e||e.forEach((e=>{var t;const n=this.ownerDocument.createElement("section"),o=this.ownerDocument.createElement("h3");o.innerText=e.name,n.appendChild(o);const r=this.ownerDocument.createElement("h3");r.innerText=e.price,n.appendChild(r),null===(t=this.shadowRoot)||void 0===t||t.appendChild(n)}))}}))}}customElements.define("app-dashboard",c),t.default=c},955:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(482),a=n(997),i=n(155),s=n(445),c={email:"",password:""};class d extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}changeEmail(e){c.email=e.target.value}changePassword(e){c.password=e.target.value}submitForm(){return o(this,void 0,void 0,(function*(){(yield(0,s.loginUser)(c.email,c.password))?(0,r.dispatch)((0,a.navigate)(i.Screens.DASHBOARD)):alert("Credenciales incorrectas o usuario no existe")}))}render(){return o(this,void 0,void 0,(function*(){if(this.shadowRoot){const e=this.ownerDocument.createElement("h1");e.innerText="Login",this.shadowRoot.appendChild(e);const t=this.ownerDocument.createElement("input");t.placeholder="Correo electronico",t.addEventListener("change",this.changeEmail),this.shadowRoot.appendChild(t);const n=this.ownerDocument.createElement("input");n.placeholder="Contraseña",n.addEventListener("change",this.changePassword),this.shadowRoot.appendChild(n);const o=this.ownerDocument.createElement("button");o.innerText="Iniciar sesión",o.addEventListener("click",this.submitForm),this.shadowRoot.appendChild(o)}}))}}customElements.define("app-login",d),t.default=d},585:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(482),a=n(997),i=n(155),s=n(445),c={email:"",password:"",name:"",age:""};class d extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}changeEmail(e){c.email=e.target.value}changePassword(e){c.password=e.target.value}changeName(e){c.name=e.target.value}changeAge(e){c.age=e.target.value}submitForm(){return o(this,void 0,void 0,(function*(){(yield(0,s.registerUser)(c))?(0,r.dispatch)((0,a.navigate)(i.Screens.LOGIN)):alert("No se pudo crear el usuario")}))}render(){return o(this,void 0,void 0,(function*(){if(this.shadowRoot){const e=this.ownerDocument.createElement("h1");e.innerText="Registro",this.shadowRoot.appendChild(e);const t=this.ownerDocument.createElement("input");t.placeholder="Correo electronico",t.addEventListener("change",this.changeEmail),this.shadowRoot.appendChild(t);const n=this.ownerDocument.createElement("input");n.placeholder="Contraseña",n.addEventListener("change",this.changePassword),this.shadowRoot.appendChild(n);const o=this.ownerDocument.createElement("input");o.placeholder="Nombre completo",o.addEventListener("change",this.changeName),this.shadowRoot.appendChild(o);const r=this.ownerDocument.createElement("input");r.placeholder="Edad",r.addEventListener("change",this.changeAge),this.shadowRoot.appendChild(r);const a=this.ownerDocument.createElement("button");a.innerText="Registrarme",a.addEventListener("click",this.submitForm),this.shadowRoot.appendChild(a)}}))}}customElements.define("app-register",d),t.default=d},997:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getProductsAction=t.navigate=void 0;const r=n(155),a=n(445);t.navigate=e=>({action:r.Actions.NAVIGATE,payload:e});t.getProductsAction=()=>o(void 0,void 0,void 0,(function*(){const e=yield(0,a.getProducts)();return{action:r.Actions.GETPRODUCTS,payload:e}}))},482:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.addObserver=t.dispatch=t.appState=void 0;const r=n(950),a=o(n(167));t.appState=a.default.get("STORE",{screen:"REGISTER",products:[]});let i=[];t.dispatch=e=>{const n=JSON.parse(JSON.stringify(t.appState)),o=(0,r.reducer)(e,n);var s;t.appState=o,s=o,a.default.set("STORE",s),i.forEach((e=>e.render()))};t.addObserver=e=>{i=[...i,e]}},950:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=void 0;const o=n(155);t.reducer=(e,t)=>{const{action:n,payload:r}=e;switch(n){case o.Actions.NAVIGATE:return Object.assign(Object.assign({},t),{screen:r});case o.Actions.GETPRODUCTS:return Object.assign(Object.assign({},t),{products:r});default:return t}}},155:(e,t)=>{var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=t.Screens=void 0,function(e){e.LOGIN="LOGIN",e.DASHBOARD="DASHBOARD",e.REGISTER="REGISTER"}(n||(t.Screens=n={})),function(e){e.NAVIGATE="NAVIGATE",e.GETPRODUCTS="GETPRODUCTS"}(o||(t.Actions=o={}))},445:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))};let r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.loginUser=t.registerUser=t.getProducts=t.addProduct=void 0;const i=()=>o(void 0,void 0,void 0,(function*(){if(!r){const{getFirestore:e}=yield Promise.all([n.e(990),n.e(26)]).then(n.bind(n,26)),{initializeApp:t}=yield Promise.all([n.e(990),n.e(223)]).then(n.bind(n,223)),{getAuth:o}=yield Promise.all([n.e(990),n.e(730)]).then(n.bind(n,730)),i=t({apiKey:"AIzaSyDdeXwNTkI8lHfmjLFhtC4FbJvfGKIr9_s",authDomain:"apps-reto1.firebaseapp.com",databaseURL:"https://apps-reto1.firebaseio.com",projectId:"apps-reto1",storageBucket:"apps-reto1.appspot.com",messagingSenderId:"470696037037",appId:"1:470696037037:web:6de930ceb2df9d14ddd424",measurementId:"G-G9ELH58HS7"});r=e(i),a=o(i)}return{db:r,auth:a}}));t.addProduct=e=>o(void 0,void 0,void 0,(function*(){try{const{db:t}=yield i(),{collection:o,addDoc:r}=yield Promise.all([n.e(990),n.e(26)]).then(n.bind(n,26)),a=o(t,"products");yield r(a,e),console.log("Se añadió con exito")}catch(e){console.error("Error adding document",e)}}));t.getProducts=()=>o(void 0,void 0,void 0,(function*(){try{const{db:e}=yield i(),{collection:t,getDocs:o}=yield Promise.all([n.e(990),n.e(26)]).then(n.bind(n,26)),r=t(e,"products"),a=yield o(r),s=[];return a.forEach((e=>{s.push(e.data())})),s}catch(e){console.error("Error getting documents",e)}}));t.registerUser=e=>o(void 0,void 0,void 0,(function*(){try{const{auth:t,db:o}=yield i(),{createUserWithEmailAndPassword:r}=yield Promise.all([n.e(990),n.e(730)]).then(n.bind(n,730)),{doc:a,setDoc:s}=yield Promise.all([n.e(990),n.e(26)]).then(n.bind(n,26)),c=a(o,"users",(yield r(t,e.email,e.password)).user.uid),d={age:e.age,name:e.name};return yield s(c,d),!0}catch(e){return console.error(e),!1}}));t.loginUser=(e,t)=>o(void 0,void 0,void 0,(function*(){try{const{auth:o}=yield i(),{signInWithEmailAndPassword:r}=yield Promise.all([n.e(990),n.e(730)]).then(n.bind(n,730)),a=yield r(o,e,t);return console.log(a.user),!0}catch(e){return console.error(e),!1}}))},167:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default={get:(e,t)=>{const n=localStorage.getItem(e)||sessionStorage.getItem(e);return n?JSON.parse(n):t},set:(e,t,n=!1)=>{const o=n?sessionStorage:localStorage,r=JSON.stringify(t);o.setItem(e,r)}}}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={exports:{}};return n[e].call(a.exports,a,a.exports,r),a.exports}r.m=n,r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>e+".bundle.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="class11:",r.l=(n,o,a,i)=>{if(e[n])e[n].push(o);else{var s,c;if(void 0!==a)for(var d=document.getElementsByTagName("script"),l=0;l<d.length;l++){var u=d[l];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+a){s=u;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+a),s.src=n),e[n]=[o];var h=(t,o)=>{s.onerror=s.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(o))),t)return t(o)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e={792:0};r.f.j=(t,n)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=a);var i=r.p+r.u(t),s=new Error;r.l(i,(n=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,o[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var o,a,[i,s,c]=n,d=0;if(i.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)c(r)}for(t&&t(n);d<i.length;d++)a=i[d],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkclass11=self.webpackChunkclass11||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();(()=>{r(585),r(418),r(955);const e=r(482),t=r(155);class n extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,e.addObserver)(this)}connectedCallback(){this.render()}render(){if(this.shadowRoot)switch(this.shadowRoot.innerHTML="",e.appState.screen){case t.Screens.REGISTER:const e=this.ownerDocument.createElement("app-register");this.shadowRoot.appendChild(e);break;case t.Screens.LOGIN:const n=this.ownerDocument.createElement("app-login");this.shadowRoot.appendChild(n);break;case t.Screens.DASHBOARD:const o=this.ownerDocument.createElement("app-dashboard");this.shadowRoot.appendChild(o)}}}customElements.define("app-container",n)})()})();